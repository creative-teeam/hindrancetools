<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>HumanTouch Lab - AI文章を人間らしく整えるツール</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">
        <div class="logo">H</div>
        <div>
          <h1>HumanTouch Lab</h1>
          <p class="tagline">
            AIが書いた文章を、「人間らしく・ちょうどよく」整えるためのローカルツール
          </p>
        </div>
      </div>
    </header>

    <main class="layout">
      <!-- LEFT: input + controls -->
      <section class="panel">
        <div class="panel-header">
          <div class="panel-title">
            元の文章
            <span class="badge">AIの出力をそのまま貼り付け</span>
          </div>
          <button id="clearInput" class="ghost small danger" type="button">
            ✕ クリア
          </button>
        </div>

        <textarea
          id="inputText"
          placeholder="例：AIが生成したメール文や説明文をここに貼り付けてください。"
        ></textarea>
        <div class="input-helper">
          <span id="inputCount">0文字</span>
          <span>ブラウザ内だけで処理され、サーバには送信されません。</span>
        </div>

        <div class="mode-tabs" id="modeTabs">
          <button
            class="mode-btn active"
            data-mode="soften"
            type="button"
            title="強すぎる表現を和らげる"
          >
            <span class="icon">🪶</span>柔らかくする
          </button>
          <button
            class="mode-btn"
            data-mode="clarify"
            type="button"
            title="あいまいな表現をできるだけ明確にする"
          >
            <span class="icon">💡</span>はっきりさせる
          </button>
          <button
            class="mode-btn"
            data-mode="emotion"
            type="button"
            title="少しだけ感情・共感を足す"
          >
            <span class="icon">❤️</span>感情を添える
          </button>
          <button
            class="mode-btn"
            data-mode="polish"
            type="button"
            title="丁寧さ・読みやすさを調整"
          >
            <span class="icon">🧹</span>整えて読みやすく
          </button>
        </div>
        <p id="modeDescription" class="mode-description">
          「柔らかくする」は、強すぎる・断定的な表現をマイルドに言い換えます。
        </p>

        <div class="actions">
          <button id="applyMode" class="primary" type="button">
            <span>変換する</span> ↻
          </button>
          <button id="swapTexts" class="secondary small" type="button">
            入れ替え（結果→元に戻す）
          </button>
          <button id="restoreDraft" class="ghost small" type="button">
            最後の下書きを復元
          </button>
          <button id="analyzeTone" class="ghost small" type="button">
            トーンを解析
          </button>
        </div>

        <div class="hint" id="writingHint">
          <strong>ヒント：</strong> 主語と「誰のための文章か」を一度書き出してから整えると、
          トーンを決めやすくなります。
        </div>
      </section>

      <!-- RIGHT: result + metrics -->
      <section class="panel">
        <div class="result-header">
          <div class="panel-title">
            整えた文章
            <span class="badge">ここから自由に手動で修正してOK</span>
          </div>
          <div class="actions">
            <button id="copyOutput" class="secondary small" type="button">
              コピー
            </button>
            <button id="downloadOutput" class="ghost small" type="button">
              保存（.txt）
            </button>
          </div>
        </div>

        <textarea
          id="outputText"
          class="textarea-small"
          placeholder="結果がここに表示されます。モードを変えて何度も試してみてください。"
        ></textarea>

        <div class="meta">
          <div class="pill">
            📏 <span id="outputCount">0文字</span>
          </div>
          <div class="pill">
            読みやすさ
            <div class="score-bar">
              <div id="readabilityBar" class="score-bar-inner"></div>
            </div>
            <span id="readabilityLabel" class="score-label">-</span>
          </div>
          <div class="pill">
            感情バランス
            <div class="score-bar">
              <div id="toneBar" class="score-bar-inner"></div>
            </div>
            <span id="toneLabel" class="score-label">-</span>
          </div>
        </div>

        <div class="hint" style="margin-top: 10px">
          <strong>この結果は「たたき台」です。</strong><br />
          最後の一手は、あなたの言葉で仕上げてください。  
          不自然だと思うところは、遠慮なく書き換えてください。
          <div class="chips" id="issueChips"></div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <span>すべての処理はブラウザ内で完結します。データは送信されません。</span>
      <span>
        GitHub Pagesで動作するシンプルなプロトタイプ / 作者メモ：AIの苦手を人が補うための実験場
      </span>
    </footer>
  </div>

  <div id="toast" class="toast">
    <span id="toastIcon">✅</span>
    <span id="toastMsg">コピーしました</span>
  </div>

  <script src="app.js"></script>
</body>
</html>
